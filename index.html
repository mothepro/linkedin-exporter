<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta
    http-equiv="X-UA-Compatible"
    content="IE=edge"
  >
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
  >
  <title>LinkedIn Sales Navigator Exporter</title>
  <link
    rel="stylesheet"
    href="https://unpkg.com/@picocss/pico@latest/css/pico.classless.min.css"
  >
</head>

<body>
  <main class="container">
    <h1>LinkedIn Sales Navigator Exporter</h1>
    <article>
      Drag <a
        role="button"
        bookmarklet
      >Export Contacts</a> to your bookmarks
    </article>
    <video autoplay muted loop controls style="max-width: 100%">
      <source type="video/mp4" src="howto.MP4">
    </video>
  </main>
  <footer>
    Made with &hearts; by <a href="https://brazetechnology.slack.com/archives/D02PGE8LJ3G">Mo</a> <span build-time>a while back</span>
  </footer>
</body>

<script>
  // TODO use the `new Intl.RelativeTimeFormat(undefined, { style: 'narrow' })`
  function timeAgo(prevDate) {
    const diff = Date.now() - prevDate
    const minute = 60 * 1000
    const hour = minute * 60
    const day = hour * 24
    const month = day * 30
    const year = day * 365
    switch (true) {
      case diff < minute:
        const seconds = Math.round(diff / 1000)
        return `${seconds} ${seconds > 1 ? 'seconds' : 'second'} ago`
      case diff < hour:
        return Math.round(diff / minute) + ' minutes ago'
      case diff < day:
        return Math.round(diff / hour) + ' hours ago'
      case diff < month:
        return Math.round(diff / day) + ' days ago'
      case diff < year:
        return Math.round(diff / month) + ' months ago'
      case diff > year:
        return Math.round(diff / year) + ' years ago'
      default:
        return ""
    }
  };

  const
    element = document.querySelector('[build-time]'),
    buildTime = element.getAttribute('build-time'),
    date = new Date(parseInt(buildTime))
  element.innerHTML = timeAgo(+date)
  element.title = date.toString()
</script>

</html>
